import sqlite3

# Função para criar a tabela Musica
def criar_tabela():
    conexao = sqlite3.connect('repertorio.db')
    cursor = conexao.cursor()
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS musica (
            id INTEGER PRIMARY KEY,
            titulo TEXT NOT NULL,
            artista TEXT NOT NULL,
            palavras_chave TEXT,
            album TEXT,
            genero TEXT,
            ano INTEGER,
            duracao_segundos INTEGER,
            compositor TEXT,
            gravadora TEXT,
            caminho_arquivo TEXT
        )
    ''')
    conexao.commit()
    conexao.close()

# Função para adicionar música
def adicionar_musica(titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho):
    conexao = sqlite3.connect('repertorio.db')
    cursor = conexao.cursor()
    cursor.execute('''
        INSERT INTO musica 
        (titulo, artista, palavras_chave, album, genero, ano, duracao_segundos, compositor, gravadora, caminho_arquivo) 
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', (titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho))
    conexao.commit()
    conexao.close()

# Função para listar músicas
def listar_musicas():
    conexao = sqlite3.connect('repertorio.db')
    cursor = conexao.cursor()
    cursor.execute('SELECT * FROM musica')
    musicas = cursor.fetchall()
    for m in musicas:
        print(m)
    conexao.close()

# Função para atualizar música
def atualizar_musica(id, titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho):
    conexao = sqlite3.connect('repertorio.db')
    cursor = conexao.cursor()
    cursor.execute('''
        UPDATE musica 
        SET titulo=?, artista=?, palavras_chave=?, album=?, genero=?, ano=?, duracao_segundos=?, compositor=?, gravadora=?, caminho_arquivo=? 
        WHERE id=?
    ''', (titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho, id))
    conexao.commit()
    conexao.close()

# Função para deletar música
def deletar_musica(id):
    conexao = sqlite3.connect('repertorio.db')
    cursor = conexao.cursor()
    cursor.execute('DELETE FROM musica WHERE id=?', (id,))
    conexao.commit()
    conexao.close()

# Menu de opções
def menu():
    print("\n=== MENU REPERTÓRIO DE MÚSICAS ===")
    print("1. Adicionar música")
    print("2. Listar músicas")
    print("3. Atualizar música")
    print("4. Deletar música")
    print("5. Sair")

# Criar tabela
criar_tabela()

# Loop principal
while True:
    menu()
    escolha = input("Escolha uma opção: ")

    if escolha == '1':
        titulo = input("Título: ")
        artista = input("Artista: ")
        palavras_chave = input("Palavras-chave: ")
        album = input("Álbum: ")
        genero = input("Gênero: ")
        ano = int(input("Ano: "))
        duracao = int(input("Duração (segundos): "))
        compositor = input("Compositor(es): ")
        gravadora = input("Gravadora: ")
        caminho = input("Caminho do arquivo: ")
        adicionar_musica(titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho)
        print("Música adicionada com sucesso!")

    elif escolha == '2':
        print("\nLista de músicas:")
        listar_musicas()

    elif escolha == '3':
        id = int(input("ID da música para atualizar: "))
        titulo = input("Título: ")
        artista = input("Artista: ")
        palavras_chave = input("Palavras-chave: ")
        album = input("Álbum: ")
        genero = input("Gênero: ")
        ano = int(input("Ano: "))
        duracao = int(input("Duração (segundos): "))
        compositor = input("Compositor(es): ")
        gravadora = input("Gravadora: ")
        caminho = input("Caminho do arquivo: ")
        atualizar_musica(id, titulo, artista, palavras_chave, album, genero, ano, duracao, compositor, gravadora, caminho)
        print("Música atualizada com sucesso!")

    elif escolha == '4':
        id = int(input("ID da música para deletar: "))
        deletar_musica(id)
        print("Música deletada com sucesso!")

    elif escolha == '5':
        print("Saindo...")
        break

    else:
        print("Opção inválida, tente novamente.")
